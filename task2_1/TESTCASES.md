### Тест-кейсы для микросервиса объявлений


# Тест-кейсы для микросервиса объявлений

## Общая информация
- **Хост**: `https://qa-internship.avito.com`
- **Версии API**: v1, v2
- **Всего ручек**: 6
- **Статус тестирования**: Автоматизировано 9 тестов (6 позитивных + 3 негативных)

---

## 1. Создание объявления (POST /api/1/item)
**Предусловия**: Нет  
**Шаги**:
1. Отправить POST запрос на `/api/1/item` с валидными данными:
   json
   {
     "sellerID": 123456,
     "name": "Велосипед горный",
     "price": 15000,
     "statistics": {
       "likes": 25,
       "viewCount": 150,
       "contacts": 10
     }
   }
   
2. Проверить ответ

**Ожидаемый результат**:
- HTTP статус 200
- В ответе содержится поле `status` с текстом `Сохранили объявление - <UUID>`
- UUID в ответе валиден

**Автотест**: `tests/api.test.js` > "POST /api/1/item - создание объявления"

---

## 2. Получение объявления по ID (GET /api/1/item/:id)
**Предусловия**: Объявление создано (ID известен)  
**Шаги**:
1. Отправить GET запрос на `/api/1/item/<VALID_ID>`
2. Проверить ответ

**Ожидаемый результат**:
- HTTP статус 200
- Ответ содержит массив с одним объявлением
- Данные объявления соответствуют созданным
- Поля содержат корректные типы данных:
  json
  [
    {
      "id": "string",
      "sellerId": "integer",
      "name": "string",
      "price": "integer",
      "statistics": {
        "likes": "integer",
        "viewCount": "integer",
        "contacts": "integer"
      },
      "createdAt": "string"
    }
  ]
  

**Автотест**: `tests/api.test.js` > "GET /api/1/item/:id - получение объявления"

---

## 3. Получение всех объявлений продавца (GET /api/1/:sellerID/item)
**Предусловия**: Продавец создал минимум одно объявление  
**Шаги**:
1. Отправить GET запрос на `/api/1/<VALID_SELLER_ID>/item`
2. Проверить ответ

**Ожидаемый результат**:
- HTTP статус 200
- Ответ содержит массив объявлений
- Все объявления принадлежат указанному продавцу
- Каждое объявление содержит полный набор полей

**Автотест**: `tests/api.test.js` > "GET /api/1/:sellerID/item - получение объявлений продавца"

---

## 4. Получение статистики по объявлению (v1) (GET /api/1/statistic/:id)
**Предусловия**: Объявление создано  
**Шаги**:
1. Отправить GET запрос на `/api/1/statistic/<VALID_ID>`
2. Проверить ответ

**Ожидаемый результат**:
- HTTP статус 200
- Ответ содержит массив статистических данных
- Каждый элемент содержит поля:
  json
  [
    {
      "likes": "integer",
      "viewCount": "integer",
      "contacts": "integer"
    }
  ]
  

**Автотест**: `tests/api.test.js` > "GET /api/1/statistic/:id - получение статистики"

---

## 5. Получение статистики по объявлению (v2) (GET /api/2/statistic/:id)
**Предусловия**: Объявление создано  
**Шаги**:
1. Отправить GET запрос на `/api/2/statistic/<VALID_ID>`
2. Проверить ответ

**Ожидаемый результат**:
- HTTP статус 200
- Ответ содержит массив статистических данных
- Структура данных соответствует v1

**Автотест**: `tests/api.test.js` > "GET /api/2/statistic/:id - получение статистики v2"

---

## 6. Удаление объявления (DELETE /api/2/item/:id)
**Предусловия**: Объявление создано  
**Шаги**:
1. Отправить DELETE запрос на `/api/2/item/<VALID_ID>`
2. Проверить ответ
3. Попытаться получить удалённое объявление

**Ожидаемый результат**:
- HTTP статус 200 при удалении
- При попытке получения удалённого объявления - HTTP 404

**Автотест**: `tests/api.test.js` > "DELETE /api/2/item/:id - удаление объявления"

---

## Негативные тест-кейсы

### 7. Создание с невалидным sellerID
**Шаги**:
1. Отправить POST запрос с sellerID < 111111
   json
   {
     "sellerID": 100000,
     ... // другие поля
   }
   ```

**Ожидаемый результат**: HTTP 400

**Автотест**: `tests/api.test.js` > "Создание с невалидным sellerID"

---

### 8. Получение несуществующего объявления
**Шаги**:

1. Отправить GET запрос на /api/1/item/non_existent_id_123

**Ожидаемый результат**: HTTP 400

**Автотест**: `tests/api.test.js` > "Получение несуществующего объявления"

---

### 9. Удаление уже удалённого объявления
**Предусловия**: Объявление уже удалено
**Шаги**:

1. Отправить DELETE запрос на /api/2/item/<DELETED_ID>

**Ожидаемый результат**: HTTP 400

**Автотест**: `tests/api.test.js` > "Удаление уже удаленного объявления"